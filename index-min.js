/*! unitTest.js-0.0.4 by da宗熊 MIT https://github.com/linfenpan/unit-test#readme*/
!function(t,n){"function"==typeof define?define.amd?define(n):define(function(t,i,e){e.exports=n()}):"object"==typeof exports?module.exports=n():t.UnitTest=n()}(this,function(t){"use strict";function n(t){return Object.prototype.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase()}function i(t){return"function"===n(t)}function e(t){return"string"===n(t)}function o(t,n){for(var i in t)t.hasOwnProperty(i)&&n.call(t,i,t[i])}function r(t,n){return o(n,function(n,i){t[n]=i}),t}function s(t){function n(){var t=i.shift();t?e(t,function(){n()}):o&&o()}t=t||{};var i=t.list,e=t.next,o=t.end;n()}function u(t,n){return new Array(n||1).join("  ")+t}function c(t){return this instanceof c?void this.init(t):new c(t)}function f(t,n){if(e(n[0])===!1)throw t+" first argument should be String";if(i(n[1])===!1)throw t+" second argument should be Function"}function a(t,n){s({list:t.slice(0),next:function(t,n){t(n)},end:function(){n()}})}var p={log:function(t){console.log(t)},error:function(t){console.error(t)},success:function(t){console.log(t)}},l=function(){var t={};return function(n,i){return function(){if(t[i])throw'"'+i+'" can not be embedded';t[i]=1;try{n.apply(this,arguments)}finally{t[i]=0}}}}(),d=5e3;return r(c.prototype,{init:function(t){var n=this;n.descriptMap={},n.options={timeout:d,afters:[],befores:[]},r(n.options,t||{}),n.logger=p,n.initDescript(),n.initIt(),n.initRun(),n.initTimeout(),n.initBeforeAndAfter()},initDescript:function(){var t=1e4,n=this,i=function(i,e){f("descript",arguments),n.descriptor=r(n.getDescriptor(t++),{index:1,desc:i});try{e()}finally{n.descriptor=null}};n.descript=l(i,"descript")},initIt:function(){var t=this,n=function(n,i){var e=t.descriptor;e&&(f("it",arguments),e.runs.push({text:n,run:i}))};t.it=l(n,"it")},initRun:function(){var t=this,n=t.options;t.run=function(){var i=t.logger,e=[];o(t.descriptMap,function(t,n){e.push(n)}),s({list:e,next:function(e,o){var r=e.desc;a(n.befores,function(){i.log("START: "+r),t.sequentTest(e,function(){i.log("END: "+r),i.log("  "),a(n.afters,o)})})},end:function(){i.success("all pass (●'◡'●)")}})}},sequentTest:function(t,n){function i(){clearTimeout(e)}var e,o=this,r=t.index+1,c=t.timeout,f=o.logger,p=t.runs;s({list:p.slice(0),next:function(n,o){var s=n.run,p=n.text;i(),e=setTimeout(function(){throw"timeout"},c),a(t.befores,function(){f.log(u(p,r));try{s(function(){i(),f.success(u("success",r+1)),a(t.afters,function(){o()})})}catch(t){throw i(),t}})},end:function(){i(),n()}})},initTimeout:function(){var t=this,n=function(n){var i=t.descriptor||t.options;i.timeout=n||d};t.timeout=n},initBeforeAndAfter:function(){var t=this,n=function(n,e){if(i(e)){var o=t.descriptor||t.options;o[n].push(e)}},e=function(t){n("befores",t)},o=function(t){n("afters",t)};t.after=o,t.before=e},getDescriptor:function(t){var n=this.options,i={id:t,desc:"",runs:[],index:0,afters:[],befores:[],timeout:n.timeout},e=this.descriptMap;return e[t]?e[t]:e[t]=i},setLogger:function(t){r(this.logger,t)}}),c});